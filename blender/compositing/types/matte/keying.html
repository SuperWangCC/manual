

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Keying Node &mdash; Blender Manual</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
  

  

  
  
    
      <link rel="search" type="application/opensearchdescription+xml" title="在 Blender Manual 中搜索" href="../../../_static/opensearch.xml"/>
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/css/theme_overrides.css" type="text/css" />
  

  
        <link rel="index" title="索引"
              href="../../../genindex.html"/>
        <link rel="search" title="搜索" href="../../../search.html"/>
    <link rel="top" title="Blender Manual" href="../../../index.html"/>
        <link rel="up" title="Matte Nodes" href="index.html"/>
        <link rel="next" title="Keying Screen Node" href="keying_screen.html"/>
        <link rel="prev" title="Ellipse Mask Node" href="ellipse_mask.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../contents.html" class="icon icon-home"> Blender 2.78 Manual
          

          
            
            <img src="../../../_static/sidebar_logo.png" class="logo" />
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Blender入门</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../interface/index.html">User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../editors/index.html">编辑器</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../data_system/index.html">数据系统</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modeling/index.html">制作模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../sculpt_paint/index.html">绘制与雕刻</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rigging/index.html">骨骼装配</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../animation/index.html">动画</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../physics/index.html">物理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../render/index.html">渲染</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">合成</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../introduction.html">简介</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html#node-types">Node Types</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../input/index.html">Input Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../output/index.html">Output Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../color/index.html">Color Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../converter/index.html">Converter Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../filter/index.html">Filter Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../vector/index.html">Vector Nodes</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Matte Nodes</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="box_mask.html">Box Mask Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="channel_key.html">Channel Key Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="chroma_key.html">Chroma Key Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="color_key.html">Color Key Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="color_spill_key.html">Color Spill Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="difference_key.html">Difference Key Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="distance_key.html">Distance Key Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="double_edge_mask.html">Double Edge Mask Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="ellipse_mask.html">Ellipse Mask Node</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Keying Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="keying_screen.html">Keying Screen Node</a></li>
<li class="toctree-l4"><a class="reference internal" href="luminance_key.html">Luminance Key Node</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../distort/index.html">Distort Nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../groups.html">Node Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../layout/index.html">Layout Nodes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../game_engine/index.html">游戏引擎</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../preferences/index.html">用户偏好设置</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../advanced/index.html">高级应用</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../troubleshooting/index.html">问题排查</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary/index.html">词汇表</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../about/index.html">关于本手册</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../contents.html">Blender 2.78 Manual</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../contents.html">Docs</a> &raquo;</li>
      
          <li><a href="../../index.html">合成</a> &raquo;</li>
      
          <li><a href="index.html">Matte Nodes</a> &raquo;</li>
      
    <li>Keying Node</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/compositing/types/matte/keying.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="keying-node">
<h1>Keying Node<a class="headerlink" href="#keying-node" title="永久链接至标题">¶</a></h1>
<div class="figure align-right" id="id1">
<a class="reference internal image-reference" href="../../../_images/compositing_nodes_keying.png"><img alt="../../../_images/compositing_nodes_keying.png" src="../../../_images/compositing_nodes_keying.png" style="width: 150px;" /></a>
<p class="caption"><span class="caption-text">Keying Node.</span></p>
</div>
<p>The <em>Keying</em> node is an one-stop-shop for &#8220;green screen&#8221; / &#8220;blue screen&#8221; removal.
It performs both chroma keying to remove the backdrop and despill to correct
color cast from the backdrop. Additionally, you can perform common operations used
to tweak the resulting matte.</p>
<div class="section" id="inputs">
<h2>Inputs<a class="headerlink" href="#inputs" title="永久链接至标题">¶</a></h2>
<dl class="docutils">
<dt>Image</dt>
<dd>Standard image input.</dd>
<dt>Key Color</dt>
<dd>The color of content to be removed. This may be a single color using the, or
a reference image such as generated by the
<a class="reference internal" href="keying_screen.html"><span class="doc">Keying Screen Node</span></a>.</dd>
<dt>Garbage Matte</dt>
<dd>An optional mask of area(s) to always <em>exclude</em> from the output.
This is removed from the chroma key generated matte.</dd>
<dt>Core Matte</dt>
<dd>An optional mask of area(s) to always <em>include</em> in the output.
This is merged with the chroma key generated matte.</dd>
</dl>
</div>
<div class="section" id="properties">
<h2>Properties<a class="headerlink" href="#properties" title="永久链接至标题">¶</a></h2>
<dl class="docutils">
<dt>Pre Blur</dt>
<dd>Reduce the effects of color noise in the image by blurring only color by
the given amount, leaving luminocity intact. This will affect matte
calculation only, not the result image.</dd>
<dt>Screen Balance</dt>
<dd><p class="first">This is the balance between color channels compared with the key color.
0.5 will average the other channels (red and blue in the case of a green screen).</p>
<p class="last">This may be tweaked in tandem with <em>Clip Black</em> and <em>Clip White</em> while
checking the <em>Matte</em> output to create a mask with optimal separation.</p>
</dd>
<dt>Despill Factor</dt>
<dd>Controls how much color bleed from the key color is removed from the input
image: 0 means no despilling, 1 means all possible spilling will be removed.
The underlying implementation is the same as adjusting the <em>Unspill</em> amount
of the <a class="reference internal" href="color_spill_key.html"><span class="doc">Color Spill Node</span></a>.</dd>
<dt>Despill Balance</dt>
<dd>This controls how the color chanels are compared when computing spill, affecting
the hue and shade of the corrected colors.
It is similar to setting the <em>Limiting Channel</em> in the
<a class="reference internal" href="color_spill_key.html"><span class="doc">Color Spill Node</span></a>.</dd>
<dt>Edge Kernel Radius</dt>
<dd>Defines the radius in pixel used to detect an edge.</dd>
<dt>Edge Kernel Tolerance</dt>
<dd>Defines threshold used to check if pixels in radius are the same as current pixel:
If the difference between pixel colors is higher than this threshold then the point
will be considered an edge.</dd>
<dt>Clip Black</dt>
<dd><p class="first">This sets the threshold for what becomes fully transparent in the output (black
in the matte). It should be set as low as possible. Uneven backdrops will require
this value to be increased. Use of the
<a class="reference internal" href="keying_screen.html"><span class="doc">Keying Screen Node</span></a> can help keep
this value low. You may also use a <em>Garbage Matte</em> to exclude problematic areas.</p>
<p class="last">This value does not impact areas detected as edges to ensure edge detail is preserved.</p>
</dd>
<dt>Clip White</dt>
<dd><p class="first">This sets the threshold for what becomes fully opaque in the output (white in the
matte). It should be set as high as possible. Colors close to green in the foreground
may require lowing this and/or adjusting the <em>Screen Balance</em>. Particularly problematic
parts can fixed with a <em>Core Matte</em> instead of a low <em>Clip White</em>.</p>
<p class="last">This value does not impact areas detected as edges to ensure edge detail is preserved.</p>
</dd>
<dt>Dilate/Erode</dt>
<dd><p class="first">Enlarge (positive numbers) or shrink (negative numbers) the matte by the specified
number of pixels. This is similar to using the
<a class="reference internal" href="../filter/dilate_erode.html"><span class="doc">Dilate/Erode Node</span></a> on the matte.</p>
<p class="last">This a simple way to include more or less along the edges of the matte,
particularly combined with <em>Post Blur</em>.</p>
</dd>
<dt>Feather Falloff</dt>
<dd>The rate of fall off at the edges of the matte when feathering, to manage edge detail.</dd>
<dt>Feather Distance</dt>
<dd>Controls how much the matte is feathered inwards (negative number)
or outwards (positive number).</dd>
<dt>Post Blur</dt>
<dd>Make the matte less sharp, for smoother transitions to the background
and noise reduction.</dd>
</dl>
</div>
<div class="section" id="outputs">
<h2>Outputs<a class="headerlink" href="#outputs" title="永久链接至标题">¶</a></h2>
<dl class="docutils">
<dt>Image</dt>
<dd>Processed image with the <em>Matte</em> applied to the images&#8217;s <a class="reference internal" href="../../../glossary/index.html#term-alpha-channel"><span class="xref std std-term">alpha channel</span></a>.</dd>
<dt>Matte</dt>
<dd>Output matte to use for checking the quality of the key, or to manually apply
using a <a class="reference internal" href="../converter/set_alpha.html"><span class="doc">Set Alpha Node</span></a> or
<a class="reference internal" href="../color/mix.html"><span class="doc">Mix Node</span></a>.</dd>
<dt>Edges</dt>
<dd>Shows what edges were detected on the matte. Useful for adjusting the
<em>Edge Kernel Radius</em> and <em>Edge Kernel Tolerance</em>.</dd>
</dl>
<div class="admonition tip">
<p class="first admonition-title">小技巧</p>
<p>If there are problems with the edges of the matte, it may help to start with
adjusting the <em>Edge Kernel</em> parameters before adjusting feathering. Detected
edges are not subject to <em>Clip Black</em> / <em>Clip White</em> thresholds to preserve
fine edge detail. You can check edge detection by connecting a
<a class="reference internal" href="../output/viewer.html"><span class="doc">Viewer Node</span></a> to the <em>Edges</em> output.</p>
<p>Sharper detected edges (smaller <em>Edge Kernel Radius</em>, like 2 / larger
<em>Edge Kernel Tolerance</em>, like 0.4) will create a sharper matte, but may loose
some detail like stray hairs. A sharp matte is good, but disappearing or
flickering hairs are distracting.</p>
<p class="last">Fat edges (larger <em>Edge Kernel Radius</em>, like 8 / smaller
<em>Edge Kernel Tolerance</em>, like 0.05) will capture more edge detail, but may
also produce a halo around the subject. The halo can be adjusted with
<em>Feather</em> controls along with <em>Dilate/Erode</em>.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="keying_screen.html" class="btn btn-neutral float-right" title="Keying Screen Node" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ellipse_mask.html" class="btn btn-neutral" title="Ellipse Mask Node" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; 版权所有 : This page is licensed under a CC-BY-SA 4.0 Int. License.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'2.78',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-1418081-1', 'auto');
  ga('send', 'pageview');

</script>


</body>
</html>